var TYMP=function(r){"use strict";function n(r){return r.length}function t(r,n,t){void 0===t&&(t=-1),-1===t&&(t=r.length);for(var e=r[0]*n[0],o=1;o<t;++o)e+=r[o]*n[o];return e}function e(r,n,t,e,o){for(var a=0,i=0,f=0;f<o;++f)if(f!==t){i=0;for(var u=0;u<o;++u)u!==e&&(n[a][i]=r[f][u],++i);++a}}function o(r){for(var n=new ArrayBuffer(r*r*4),t=[],e=0;e<r;++e)t[e]=new Float32Array(n,e*r<<2,r);return t}function a(r,n){if(1===n)return r[0][0];if(2===n)return r[0][0]*r[1][1]-r[0][1]*r[1][0];if(3===n)return r[0][0]*r[1][1]*r[2][2]+r[0][1]*r[1][2]*r[2][0]+r[0][2]*r[1][0]*r[2][1]-r[0][2]*r[1][1]*r[2][0]-r[0][1]*r[1][0]*r[2][2]-r[0][0]*r[1][2]*r[2][1];for(var t=1,i=0,f=o(n-1),u=0;u<n;++u)e(r,f,0,u,n),i+=t*r[0][u]*a(f,n-1),t=-t;return i}function i(r,n){var i=r.length,f=r[0],u=[];n=n||new Float32Array(i+1);for(var v=1;v<i;++v){for(var l=r[v],s=[],h=0;h<i;++h)s[h]=f[h]-l[h];u.push(s)}return function(r,n){var t=r[0].length;if(n=n||new Float32Array(t),3===t){var i=r[0],f=r[1],u=i[0],v=i[1],l=i[2],s=f[0],h=f[1],c=f[2];n[0]=v*c-l*h,n[1]=l*s-u*c,n[2]=u*h-v*s}else for(var g=t%2?-1:1,p=o(t-1),d=0;d<t;++d)e(r,p,t-1,d,t),n[d]=g*a(p,t-1),g=-g}(u,n),n[i]=-t(f,n,i),function(r){for(var n=r.length,t=r[0]*r[0],e=1;e<n-1;++e)t+=r[e]*r[e];if(0===t)return r;for(t=1/Math.sqrt(t),e=0;e<n;++e)r[e]*=t}(n),n}function f(r){for(var n=r.length,t=0;t<n;++t)r[t]=-r[t];return r}function u(r,n,t){void 0===t&&(t=-1),-1===t&&(t=r.length);for(var e=n[t],o=0;o<t;++o)e+=r[o]*n[o];return e}function v(r,n,e,o,a){void 0===a&&(a=!1);var i=t(e,n,o);return Math.abs(i)>0&&(!a||i>0)?-u(r,e,o)/i:-1}function l(r,n){if(2===n){var t=r[0][0],i=r[0][1],f=r[1][0];if(0===(p=t*(l=r[1][1])-i*f))return null;var u=1/p;r[0][0]=l*u,r[0][1]=-i*u,r[1][0]=-f*u,r[1][1]=t*u}else{if(3===n){t=r[0][0],i=r[0][1];var v=r[0][2],l=(f=r[1][0],r[1][1]),s=r[1][2],h=r[2][0],c=r[2][1],g=r[2][2];if(0===(p=t*(l*g-s*c)-i*(f*g-s*h)+v*(f*c-l*h)))return null;u=1/p;return r[0][0]=(l*g-s*c)*u,r[0][1]=(v*c-i*g)*u,r[0][2]=(i*s-v*l)*u,r[1][0]=(s*h-f*g)*u,r[1][1]=(t*g-v*h)*u,r[1][2]=(v*f-t*s)*u,r[2][0]=(f*c-l*h)*u,r[2][1]=(i*h-t*c)*u,r[2][2]=(t*l-i*f)*u,this}var p;if(0===(p=a(r,n)))return null;u=1/p;for(var d=function(r,n,t){if(1===t)return[[1]];for(var i=1,f=o(t),u=0;u<t;++u)for(var v=0;v<t;++v)e(r,f,u,v,t),i=(u+v)%2==0?1:-1,n[v][u]=i*a(f,t-1);return n}(r,o(n),n),w=0;w<n;++w)for(var m=0;m<n;m++)r[w][m]=d[w][m]*u}return r}var s=function(){function r(r){this.verts=[],this.facet=r}return r.prototype.getPlane=function(r,n){return this._plane||(this._plane=i(this.verts.map((function(n){return r[n]}))),u(n,this._plane)&&f(this._plane)),this._plane},r}(),h=function(){this.ridges=[],this.verts=[]};function c(r,n,t){for(var e=n.verts,o=e.length,a=0,i=t;a<i.length;a++)for(var f=0,u=i[a].ridges;f<u.length;f++){var v=u[f];if(!v.neighbor){for(var l=!0,s=0;s<o;++s)l=l&&v.verts.indexOf(e[s])>=0;if(l)return n.neighbor=v,void(v.neighbor=n)}}}function g(r,n,t,e){var o=r.ridges.map((function(r){return n[r.verts[0]]})),a=r.plane=i(o);if(e&&u(e,a,t)>0){f(a),r.verts.reverse(),r.ridges.reverse();for(var v=0,l=r.ridges;v<l.length;v++){l[v].verts.reverse()}}}function p(r,n,t){for(var e=r.verts,o=r.ridges.length;o<t;++o){for(var a=new s(r),i=0;i<t-1;++i)a.verts[i]=e[(o+i)%t];a.opposite=e[(o+t)%t],c(0,a,n),r.ridges.push(a)}}function d(r,n,t,e,o,a){var i=new h;return i.verts=r.verts.concat([n]),i.ridges.push(r),r.facet=i,r.opposite=n,p(i,e,a),g(i,t,a,o),i}function w(r,n,t){var e=r[n?n[0]:0],o=e.length,a=n?n.length:o+1;if(t)for(var i=0;i<o;++i)t[i]=e[i];else t=e.slice();for(i=0;i<o;++i){for(var f=1;f<a;++f){var u=n?n[f]:f;t[i]+=r[u][i]}t[i]/=a}return t}function m(r,n){for(var t=r[0].length,e=t+1,o=[],a=0;a<=t;++a){for(var i=new h,f=0;f<t;++f){var u=(a+f)%e;i.verts[f]=n?n[u]:u}p(i,o,t);var v=(a+t)%(t+1);g(i,r,t,r[n?n[v]:v]),o.push(i)}return o}function b(r,n){console.assert(n<r.length,"Index out of bounds!");var t=r.pop();return r.length>0&&t!==r[n]&&(r[n]=t),n}function y(r,n){var t=r.pop();if(t===n)return r.length;var e=r.indexOf(n);if(-1===e)throw r.push(t),new Error("Removing component that's not present");return r[e]=t,e}var A=1e-4,F=function(){this.outsideSet=[],this.outsideDist=[]};function M(r){var n=r.meta,t=n.outsideSet,e=n.outsideDist,o=t.length;if(0===o)return-1;for(var a=t[0],i=e[0],f=1;f<o;++f)e[f]>i&&(i=e[f],a=t[f]);return a}function S(r,n,t,e){for(var o=t.map((function(r){return[]})),a=r.length,i=0;i<a;++i)for(var f=r[i],v=n[f],l=0,s=t;l<s.length;l++){var h=s[l],c=u(v,h.plane,e);if(c>A){var g=h.meta;g.outsideSet.push(f),g.outsideDist.push(c);break}}return o}function _(r,n,t,e,o){t.push(n),n.meta.currentPoint=r;for(var a=0,i=n.ridges;a<i.length;a++){var f=i[a],v=f.neighbor.facet;v.meta.currentPoint!==r&&(u(r,v.plane,o)>A?_(r,v,t,e,o):e.push(f))}}function P(r,n,t,e,o){for(var a=[],i=0,f=t;i<f.length;i++){var u=d(f[i],n,r,a,e,o);u.meta=new F,a.push(u)}return a}function x(r,n,t,e){for(var o=t[r],a=t[n],i=0;i<e;++i){if(o[i]<a[i])return n;if(o[i]>a[i])return r}return n}function k(r,n,t,e){for(var o=t[r],a=t[n],i=0;i<e;++i){if(o[i]>a[i])return n;if(o[i]<a[i])return r}return n}function q(r){var t=r.length;if(0!==t){var e=n(r[0]);if(t<=e)throw new Error("A convex hull in "+e+" dimensions requires at least "+(e+1)+" points.");for(var o=[],a=0;a<t;++a)o.push(a);for(var f=function(r,n){for(var t=r.length,e=0,o=0,a=1;a<t;++a)o=x(a,o,r,n),e=k(a,e,r,n);var f=[e,o],v=[r[e],r[o]];for(a=2;a<n+1;++a){for(var l=i(v),s=-1/0,h=-1,c=0;c<t;++c){var g=Math.abs(u(r[c],l,a));g>s&&(s=g,h=c)}f.push(h),v.push(r[h])}return f}(r,e),v=w(r,f),l=m(r,f),s=0,h=l;s<h.length;s++){h[s].meta=new F}!function(r,n){for(var t=0,e=n.slice().sort((function(r,n){return n-r}));t<e.length;t++)b(r,e[t])}(o,f),function(r){for(var n,t,e=r.length;0!==e;)t=Math.floor(Math.random()*e),n=r[e-=1],r[e]=r[t],r[t]=n}(o),S(o,r,l,e);for(var c=!1;!c;){c=!0;for(a=0;a<l.length;++a){var g=l[a],p=M(g);if(-1!==p){y(g.meta.outsideSet,p);var d=[],A=[];_(r[p],g,d,A,e);for(var q=P(r,p,A,v,e),D=0,O=d;D<O.length;D++){var B=O[D];y(l,B)<=a&&--a,S(B.meta.outsideSet,r,q,e),B.meta.outsideSet.length>0&&(c=!1)}l.push.apply(l,q)}}}for(var E=0,R=l;E<R.length;E++){R[E].meta=null}return l}}var D=[],O=[];function B(r,n,t,e,o,a){w(t,n.verts,e);for(var i=0;i<a;++i)o[i]=r[i]-e[i];for(var f=null,u=.9999,l=0,s=n.ridges;l<s.length;l++){var h=s[l],c=v(e,o,h.getPlane(t,e),a,!0);c>A&&c<=u&&(u=c,f=h)}return f?f.neighbor?B(r,f.neighbor.facet,t,e,o,a):null:n}return r.Facet=h,r.Ridge=s,r.barycentricCoords=function(r,t,e,a){var i=n(r);a=a||new Float32Array(i+1);var f=D[i];f||(D[i]=f=o(i),O[i]=new Float32Array(i));for(var u=O[i],v=t.verts,s=e[v[i]],h=0;h<i;++h){u[h]=r[h]-s[h];for(var c=e[v[h]],g=0;g<i;++g)f[g][h]=c[g]-s[g]}for(l(f,i),function(r,n,t,e){for(var o=0;o<e;++o){t[o]=0;for(var a=0;a<e;++a)t[o]+=n[a]*r[o][a]}}(f,u,a,i),a[i]=1,h=0;h<i;++h)a[i]-=a[h];return a},r.createSimplex=m,r.delaunay=function(r){var t=n(r[0]);return r.length===t+1?q(r):q(function(r,n){for(var t=n+1,e=r.length,o=t<<2,a=new ArrayBuffer((e+1)*o),i=0,f=0,u=r[0].slice(),v=r[0].slice(),l=r.map((function(r){for(var e=new Float32Array(a,i,t),l=0,s=0;s<n;++s){var h=r[s];e[s]=h,h<u[s]&&(u[s]=h),h>v[s]&&(v[s]=h),l+=h*h}return e[n]=l,l>f&&(f=l),i+=o,e})),s=new Float32Array(a,e*o,t),h=0;h<n;++h)s[h]=.5*(u[h]+v[h]);return s[n]=f,l.push(s),l}(r,t)).filter((function(r){if(r.plane[t]>=0){for(var n=0,e=r.ridges;n<e.length;n++){var o=e[n];o.neighbor&&(o.neighbor.neighbor=null)}return!1}return!0}))},r.quickHull=q,r.visibilityWalk=function(r,t,e,o){var a;if(!0===o){if(!(a=function(r,n,t){for(var e=t.length,o=0;o<e;++o){for(var a=t[o],i=a.verts,f=i.length,u=n[0].length,v=!0,l=0;l<u;++l){for(var s=n[i[0]][l],h=s,c=1;c<f;++c){var g=n[i[c]][l];g<s?s=g:g>h&&(h=g)}var p=r[l];if(p<s||p>=h){v=!1;break}}if(v)return a}return null}(r,e,t)))return null}else a=o||t[0];var i=n(e[0]);return B(r,a,e,new Float32Array(i),new Float32Array(i),i)},Object.defineProperty(r,"__esModule",{value:!0}),r}({});
