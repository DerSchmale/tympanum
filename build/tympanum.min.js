var TYMP=function(r){"use strict";var n=function(r){this.verts=[],this.facet=r},t=function(){this.ridges=[],this.verts=[]};function e(r){return r.length}function o(r,n,t,e,o){for(var i=0,a=0,u=0;u<o;++u)if(u!==t){a=0;for(var f=0;f<o;++f)f!==e&&(n[i][a]=r[u][f],++a);++i}}function i(r){for(var n=[],t=0;t<r;++t)n[t]=new Float32Array(r);return n}function a(r,n){if(1===n)return r[0][0];if(2===n)return r[0][0]*r[1][1]-r[0][1]*r[1][0];if(3===n)return r[0][0]*r[1][1]*r[2][2]+r[0][1]*r[1][2]*r[2][0]+r[0][2]*r[1][0]*r[2][1]-r[0][2]*r[1][1]*r[2][0]-r[0][1]*r[1][0]*r[2][2]-r[0][0]*r[1][2]*r[2][1];for(var t=1,e=0,u=i(n-1),f=0;f<n;++f)o(r,u,0,f,n),e+=t*r[0][f]*a(u,n-1),t=-t;return e}function u(r,n){var t=r.length,e=r[0],u=[];n=n||new Float32Array(t+1);for(var f=1;f<t;++f){for(var v=r[f],s=[],h=0;h<t;++h)s[h]=v[h]-e[h];u.push(s)}return function(r,n){var t=r[0].length;if(n=n||new Float32Array(t),3===t){var e=r[0],u=r[1],f=e[0],v=e[1],s=e[2],h=u[0],l=u[1],c=u[2];n[0]=v*c-s*l,n[1]=s*h-f*c,n[2]=f*l-v*h}else for(var g=t%2?-1:1,p=i(t-1),d=0;d<t;++d)o(r,p,t-1,d,t),n[d]=g*a(p,t-1),g=-g}(u,n),n[t]=-function(r,n,t){void 0===t&&(t=-1),-1===t&&(t=r.length);for(var e=r[0]*n[0],o=1;o<t;++o)e+=r[o]*n[o];return e}(e,n,t),function(r){for(var n=r.length,t=r[0]*r[0],e=1;e<n-1;++e)t+=r[e]*r[e];if(0===t)return r;for(t=1/Math.sqrt(t),e=0;e<n;++e)r[e]*=t}(n),n}function f(r,n,t){for(var e=n[t],o=0;o<t;++o)e+=r[o]*n[o];return e}function v(r,n,t){for(var e=n.verts,o=e.length,i=0,a=t;i<a.length;i++)for(var u=0,f=a[i].ridges;u<f.length;u++){var v=f[u];if(!v.neighbor){for(var s=!0,h=0;h<o;++h)s=s&&v.verts.indexOf(e[h])>=0;if(s)return n.neighbor=v,void(v.neighbor=n)}}}function s(r,n,t,e){var o=r.ridges.map((function(r){return n[r.verts[0]]})),i=r.plane=u(o);if(e&&f(e,i,t)>0){!function(r){for(var n=r.length,t=0;t<n;++t)r[t]=-r[t]}(i),r.verts.reverse(),r.ridges.reverse();for(var a=0,v=r.ridges;a<v.length;a++){v[a].verts.reverse()}}}function h(r,t,e){for(var o=r.verts,i=r.ridges.length;i<e;++i){for(var a=new n(r),u=0;u<e-1;++u)a.verts[u]=o[(i+u)%e];a.opposite=o[(i+e)%e],v(0,a,t),r.ridges.push(a)}}function l(r,n,e,o,i,a){var u=new t;return u.verts=r.verts.concat([n]),u.ridges.push(r),r.facet=u,r.opposite=n,h(u,o,a),s(u,e,a,i),u}function c(r,n){for(var e=r[0].length,o=e+1,i=[],a=0;a<=e;++a){for(var u=new t,f=0;f<e;++f){var v=(a+f)%o;u.verts[f]=n?n[v]:v}h(u,i,e);var l=(a+e)%(e+1);s(u,r,e,r[n?n[l]:l]),i.push(u)}return i}function g(r,n){console.assert(n<r.length,"Index out of bounds!");var t=r.pop();return r.length>0&&t!==r[n]&&(r[n]=t),n}function p(r,n){var t=r.pop();if(t===n)return r.length;var e=r.indexOf(n);if(-1===e)throw r.push(t),new Error("Removing component that's not present");return r[e]=t,e}var d=function(){this.outsideSet=[],this.outsideDist=[]};function m(r){var n=r.meta,t=n.outsideSet,e=n.outsideDist,o=t.length;if(0===o)return-1;for(var i=t[0],a=e[0],u=1;u<o;++u)e[u]>a&&(a=e[u],i=t[u]);return i}function w(r,n,t,e){for(var o=t.map((function(r){return[]})),i=r.length,a=0;a<i;++a)for(var u=r[a],v=n[u],s=0,h=t;s<h.length;s++){var l=h[s],c=f(v,l.plane,e);if(c>0){var g=l.meta;g.outsideSet.push(u),g.outsideDist.push(c);break}}return o}function b(r,n,t,e,o){t.push(n),n.meta.currentPoint=r;for(var i=0,a=n.ridges;i<a.length;i++){var u=a[i],v=u.neighbor.facet;v.meta.currentPoint!==r&&(f(r,v.plane,o)>0?b(r,v,t,e,o):e.push(u))}}function y(r,n,t,e,o){for(var i=[],a=0,u=t;a<u.length;a++){var f=l(u[a],n,r,i,e,o);f.meta=new d,i.push(f)}return i}function A(r,n,t,e){for(var o=t[r],i=t[n],a=0;a<e;++a){if(o[a]<i[a])return n;if(o[a]>i[a])return r}return n}function S(r,n,t,e){for(var o=t[r],i=t[n],a=0;a<e;++a){if(o[a]>i[a])return n;if(o[a]<i[a])return r}return n}function F(r){var n=r.length;if(0!==n){var t=e(r[0]);if(n<=t)throw new Error("A convex hull in "+t+" dimensions requires at least "+(t+1)+" points.");for(var o=[],i=0;i<n;++i)o.push(i);for(var a=function(r,n){for(var t=r.length,e=0,o=0,i=1;i<t;++i)o=A(i,o,r,n),e=S(i,e,r,n);var a=[e,o],v=[r[e],r[o]];for(i=2;i<n+1;++i){for(var s=u(v),h=-1/0,l=-1,c=0;c<t;++c){var g=Math.abs(f(r[c],s,i));g>h&&(h=g,l=c)}a.push(l),v.push(r[l])}return a}(r,t),v=function(r,n){for(var t=r[0].slice(),e=t.length,o=n?n.length:e+1,i=0;i<e;++i){for(var a=1;a<o;++a){var u=n[a];t[i]+=r[u][i]}t[i]/=o}return t}(r,a),s=c(r,a),h=0,l=s;h<l.length;h++){l[h].meta=new d}!function(r,n){for(var t=n.slice().sort((function(r,n){return n-r})),e=0,o=t;e<o.length;e++)g(r,t[o[e]])}(o,a),function(r){for(var n,t,e=r.length;0!==e;)t=Math.floor(Math.random()*e),n=r[e-=1],r[e]=r[t],r[t]=n}(o),w(o,r,s,t);for(var F=!1;!F;){F=!0;for(i=0;i<s.length;++i){var M=s[i],x=m(M);if(-1!==x){p(M.meta.outsideSet,x);var k=[],P=[];b(r[x],M,k,P,t);for(var q=y(r,x,P,v,t),D=0,O=k;D<O.length;D++){var E=O[D];p(s,E)<=i&&--i,w(E.meta.outsideSet,r,q,t),E.meta.outsideSet.length>0&&(F=!1)}s.push.apply(s,q)}}}for(var R=0,_=s;R<_.length;R++){_[R].meta=null}return s}}return r.Facet=t,r.Ridge=n,r.createSimplex=c,r.delaunay=function(r){var n=e(r[0]);return r.length===n+1?F(r):F(function(r,n){for(var t=n+1,e=r.length,o=t<<2,i=new ArrayBuffer((e+1)*o),a=0,u=0,f=r.map((function(r){for(var e=new Float32Array(i,a,t),f=0,v=0;v<n;++v){var s=r[v];e[v]=s,f+=s*s}return e[n]=f,f>u&&(u=f),a+=o,e})),v=new Float32Array(i,e*o,t),s=0;s<n;++s)v[s]=0;return v[n]=10*u,f.push(v),f}(r,n)).filter((function(r){if(r.plane[n]>=0){for(var t=0,e=r.ridges;t<e.length;t++){var o=e[t];o.neighbor&&(o.neighbor.neighbor=null)}return!1}return!0}))},r.quickHull=F,r.visibilityWalk=function(r,n,t,e){return void 0===e&&(e=0),-1===e&&-1===(e=function(r,n,t){for(var e=t.length,o=0;o<e;++o){for(var i=t[o].verts,a=i.length,u=n[0].length,f=!0,v=0;v<u;++v){for(var s=n[i[0]][v],h=s,l=1;l<a;++l){var c=n[i[l]][v];c<s?s=c:c>h&&(h=c)}var g=r[v];if(g<s||g>=h){f=!1;break}}if(f)return o}return-1}(r,t,n))?null:function(r,n,t){for(var e=0,o=n.ridges;e<o.length;e++)o[e];return n}(0,n[e])},Object.defineProperty(r,"__esModule",{value:!0}),r}({});
