var TYMP=function(r){"use strict";var n=function(r){this.verts=[],this.facet=r},t=function(){this.ridges=[],this.verts=[]};function e(r){return r.length}function o(r,n,t,e,o){for(var a=0,i=0,u=0;u<o;++u)if(u!==t){i=0;for(var f=0;f<o;++f)f!==e&&(n[a][i]=r[u][f],++i);++a}}function a(r){for(var n=[],t=0;t<r;++t)n[t]=new Float32Array(r);return n}function i(r,n){if(1===n)return r[0][0];if(2===n)return r[0][0]*r[1][1]-r[0][1]*r[1][0];if(3===n)return r[0][0]*r[1][1]*r[2][2]+r[0][1]*r[1][2]*r[2][0]+r[0][2]*r[1][0]*r[2][1]-r[0][2]*r[1][1]*r[2][0]-r[0][1]*r[1][0]*r[2][2]-r[0][0]*r[1][2]*r[2][1];for(var t=1,e=0,u=a(n-1),f=0;f<n;++f)o(r,u,0,f,n),e+=t*r[0][f]*i(u,n-1),t=-t;return e}function u(r,n){var t=r.length,e=r[0],u=[];n=n||new Float32Array(t+1);for(var f=1;f<t;++f){for(var v=r[f],s=[],h=0;h<t;++h)s[h]=v[h]-e[h];u.push(s)}return function(r,n){var t=r[0].length;if(n=n||new Float32Array(t),3===t){var e=r[0],u=r[1],f=e[0],v=e[1],s=e[2],h=u[0],l=u[1],c=u[2];n[0]=v*c-s*l,n[1]=s*h-f*c,n[2]=f*l-v*h}else for(var g=t%2?-1:1,p=a(t-1),d=0;d<t;++d)o(r,p,t-1,d,t),n[d]=g*i(p,t-1),g=-g}(u,n),n[t]=-function(r,n,t){void 0===t&&(t=-1),-1===t&&(t=r.length);for(var e=r[0]*n[0],o=1;o<t;++o)e+=r[o]*n[o];return e}(e,n,t),function(r){for(var n=r.length,t=r[0]*r[0],e=1;e<n-1;++e)t+=r[e]*r[e];if(0===t)return r;for(t=1/Math.sqrt(t),e=0;e<n;++e)r[e]*=t}(n),n}function f(r,n,t){for(var e=n[t],o=0;o<t;++o)e+=r[o]*n[o];return e}function v(r,n,t){for(var e=n.verts,o=e.length,a=0,i=t;a<i.length;a++)for(var u=0,f=i[a].ridges;u<f.length;u++){var v=f[u];if(!v.neighbor){for(var s=!0,h=0;h<o;++h)s=s&&v.verts.indexOf(e[h])>=0;if(s)return n.neighbor=v,void(v.neighbor=n)}}}function s(r,n,t,e){var o=r.ridges.map((function(r){return n[r.verts[0]]})),a=r.plane=u(o);if(e&&f(e,a,t)>0){!function(r){for(var n=r.length,t=0;t<n;++t)r[t]=-r[t]}(a),r.verts.reverse(),r.ridges.reverse();for(var i=0,v=r.ridges;i<v.length;i++){v[i].verts.reverse()}}}function h(r,t,e){for(var o=r.verts,a=r.ridges.length;a<e;++a){for(var i=new n(r),u=0;u<e-1;++u)i.verts[u]=o[(a+u)%e];i.opposite=o[(a+e)%e],v(0,i,t),r.ridges.push(i)}}function l(r,n,e,o,a,i){var u=new t;return u.verts=r.verts.concat([n]),u.ridges.push(r),r.facet=u,r.opposite=n,h(u,o,i),s(u,e,i,a),u}function c(r,n){for(var e=r[0].length,o=e+1,a=[],i=0;i<=e;++i){for(var u=new t,f=0;f<e;++f){var v=(i+f)%o;u.verts[f]=n?n[v]:v}h(u,a,e);var l=(i+e)%(e+1);s(u,r,e,r[n?n[l]:l]),a.push(u)}return a}function g(r,n){console.assert(n<r.length,"Index out of bounds!");var t=r.pop();return r.length>0&&t!==r[n]&&(r[n]=t),n}function p(r,n){var t=r.pop();if(t===n)return r.length;var e=r.indexOf(n);if(-1===e)throw r.push(t),new Error("Removing component that's not present");return r[e]=t,e}var d=1e-4,m=function(){this.outsideSet=[],this.outsideDist=[]};function w(r){var n=r.meta,t=n.outsideSet,e=n.outsideDist,o=t.length;if(0===o)return-1;for(var a=t[0],i=e[0],u=1;u<o;++u)e[u]>i&&(i=e[u],a=t[u]);return a}function b(r,n,t,e){for(var o=t.map((function(r){return[]})),a=r.length,i=0;i<a;++i)for(var u=r[i],v=n[u],s=0,h=t;s<h.length;s++){var l=h[s],c=f(v,l.plane,e);if(c>d){var g=l.meta;g.outsideSet.push(u),g.outsideDist.push(c);break}}return o}function y(r,n,t,e,o){t.push(n),n.meta.currentPoint=r;for(var a=0,i=n.ridges;a<i.length;a++){var u=i[a],v=u.neighbor.facet;v.meta.currentPoint!==r&&(f(r,v.plane,o)>d?y(r,v,t,e,o):e.push(u))}}function A(r,n,t,e,o){for(var a=[],i=0,u=t;i<u.length;i++){var f=l(u[i],n,r,a,e,o);f.meta=new m,a.push(f)}return a}function S(r,n,t,e){for(var o=t[r],a=t[n],i=0;i<e;++i){if(o[i]<a[i])return n;if(o[i]>a[i])return r}return n}function F(r,n,t,e){for(var o=t[r],a=t[n],i=0;i<e;++i){if(o[i]>a[i])return n;if(o[i]<a[i])return r}return n}function M(r){var n=r.length;if(0!==n){var t=e(r[0]);if(n<=t)throw new Error("A convex hull in "+t+" dimensions requires at least "+(t+1)+" points.");for(var o=[],a=0;a<n;++a)o.push(a);for(var i=function(r,n){for(var t=r.length,e=0,o=0,a=1;a<t;++a)o=S(a,o,r,n),e=F(a,e,r,n);var i=[e,o],v=[r[e],r[o]];for(a=2;a<n+1;++a){for(var s=u(v),h=-1/0,l=-1,c=0;c<t;++c){var g=Math.abs(f(r[c],s,a));g>h&&(h=g,l=c)}i.push(l),v.push(r[l])}return i}(r,t),v=function(r,n){for(var t=r[0].slice(),e=t.length,o=n?n.length:e+1,a=0;a<e;++a){for(var i=1;i<o;++i){var u=n[i];t[a]+=r[u][a]}t[a]/=o}return t}(r,i),s=c(r,i),h=0,l=s;h<l.length;h++){l[h].meta=new m}!function(r,n){for(var t=0,e=n.slice().sort((function(r,n){return n-r}));t<e.length;t++)g(r,e[t])}(o,i),function(r){for(var n,t,e=r.length;0!==e;)t=Math.floor(Math.random()*e),n=r[e-=1],r[e]=r[t],r[t]=n}(o),b(o,r,s,t);for(var d=!1;!d;){d=!0;for(a=0;a<s.length;++a){var M=s[a],x=w(M);if(-1!==x){p(M.meta.outsideSet,x);var P=[],q=[];y(r[x],M,P,q,t);for(var D=A(r,x,q,v,t),O=0,k=P;O<k.length;O++){var E=k[O];p(s,E)<=a&&--a,b(E.meta.outsideSet,r,D,t),E.meta.outsideSet.length>0&&(d=!1)}s.push.apply(s,D)}}}for(var R=0,_=s;R<_.length;R++){_[R].meta=null}return s}}return r.Facet=t,r.Ridge=n,r.createSimplex=c,r.delaunay=function(r){var n=e(r[0]);return r.length===n+1?M(r):M(function(r,n){for(var t=n+1,e=r.length,o=t<<2,a=new ArrayBuffer((e+1)*o),i=0,u=0,f=r.map((function(r){for(var e=new Float32Array(a,i,t),f=0,v=0;v<n;++v){var s=r[v];e[v]=s,f+=s*s}return e[n]=f,f>u&&(u=f),i+=o,e})),v=new Float32Array(a,e*o,t),s=0;s<n;++s)v[s]=0;return v[n]=10*u,f.push(v),f}(r,n)).filter((function(r){if(r.plane[n]>=0){for(var t=0,e=r.ridges;t<e.length;t++){var o=e[t];o.neighbor&&(o.neighbor.neighbor=null)}return!1}return!0}))},r.quickHull=M,Object.defineProperty(r,"__esModule",{value:!0}),r}({});
