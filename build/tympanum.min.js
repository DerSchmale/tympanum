var TYMP=function(r){"use strict";function n(r){return r.length}function t(r,n,t){void 0===t&&(t=-1),-1===t&&(t=r.length);for(var e=r[0]*n[0],o=1;o<t;++o)e+=r[o]*n[o];return e}function e(r,n,t,e,o){for(var a=0,f=0,i=0;i<o;++i)if(i!==t){f=0;for(var u=0;u<o;++u)u!==e&&(n[a][f]=r[i][u],++f);++a}}function o(r){for(var n=new ArrayBuffer(r*r*4),t=[],e=0;e<r;++e)t[e]=new Float32Array(n,e*r<<2,r);return t}function a(r,n){if(1===n)return r[0][0];if(2===n)return r[0][0]*r[1][1]-r[0][1]*r[1][0];if(3===n)return r[0][0]*r[1][1]*r[2][2]+r[0][1]*r[1][2]*r[2][0]+r[0][2]*r[1][0]*r[2][1]-r[0][2]*r[1][1]*r[2][0]-r[0][1]*r[1][0]*r[2][2]-r[0][0]*r[1][2]*r[2][1];for(var t=1,f=0,i=o(n-1),u=0;u<n;++u)e(r,i,0,u,n),f+=t*r[0][u]*a(i,n-1),t=-t;return f}function f(r,n,f){var u=r.length,v=r[0],l=[];f=f||new Float32Array(u+1);for(var s=1;s<u;++s){for(var h=r[s],c=[],g=0;g<u;++g)c[g]=v[g]-h[g];l.push(c)}if(function(r,n){var t=r[0].length;if(n=n||new Float32Array(t),3===t){var f=r[0],i=r[1],u=f[0],v=f[1],l=f[2],s=i[0],h=i[1],c=i[2];n[0]=v*c-l*h,n[1]=l*s-u*c,n[2]=u*h-v*s}else for(var g=t%2?-1:1,p=o(t-1),d=0;d<t;++d)e(r,p,t-1,d,t),n[d]=g*a(p,t-1),g=-g}(l,f),function(r,n){n=null!=n?n:r.length;for(var t=r[0]*r[0],e=1;e<n;++e)t+=r[e]*r[e];if(0===t)return r;for(t=1/Math.sqrt(t),e=0;e<n;++e)r[e]*=t}(f,3),f[u]=-t(v,f,u),i(n,f,u)>0)for(s=0;s<u;++s)f[s]=-f[s];return f}function i(r,n,t){void 0===t&&(t=-1),-1===t&&(t=r.length);for(var e=n[t],o=0;o<t;++o)e+=r[o]*n[o];return e}function u(r,n,e,o,a){void 0===a&&(a=!1);var f=t(e,n,o);return Math.abs(f)>0&&(!a||f>0)?-i(r,e,o)/f:-1}function v(r,n){if(2===n){var t=r[0][0],f=r[0][1],i=r[1][0];if(0===(p=t*(l=r[1][1])-f*i))return null;var u=1/p;r[0][0]=l*u,r[0][1]=-f*u,r[1][0]=-i*u,r[1][1]=t*u}else{if(3===n){t=r[0][0],f=r[0][1];var v=r[0][2],l=(i=r[1][0],r[1][1]),s=r[1][2],h=r[2][0],c=r[2][1],g=r[2][2];if(0===(p=t*(l*g-s*c)-f*(i*g-s*h)+v*(i*c-l*h)))return null;u=1/p;return r[0][0]=(l*g-s*c)*u,r[0][1]=(v*c-f*g)*u,r[0][2]=(f*s-v*l)*u,r[1][0]=(s*h-i*g)*u,r[1][1]=(t*g-v*h)*u,r[1][2]=(v*i-t*s)*u,r[2][0]=(i*c-l*h)*u,r[2][1]=(f*h-t*c)*u,r[2][2]=(t*l-f*i)*u,this}var p;if(0===(p=a(r,n)))return null;u=1/p;for(var d=function(r,n,t){if(1===t)return[[1]];for(var f=1,i=o(t),u=0;u<t;++u)for(var v=0;v<t;++v)e(r,i,u,v,t),f=(u+v)%2==0?1:-1,n[v][u]=f*a(i,t-1);return n}(r,o(n),n),w=0;w<n;++w)for(var m=0;m<n;m++)r[w][m]=d[w][m]*u}return r}var l=function(){function r(r){this.verts=[],this.facet=r}return r.prototype.getPlane=function(r,n){return this._plane||(this._plane=f(this.verts.map((function(n){return r[n]})),n)),this._plane},r}(),s=function(){this.ridges=[],this.verts=[]};function h(r,n,t){for(var e=n.verts,o=e.length,a=0,f=t;a<f.length;a++)for(var i=0,u=f[a].ridges;i<u.length;i++){var v=u[i];if(!v.neighbor){for(var l=!0,s=0;s<o;++s)l=l&&v.verts.indexOf(e[s])>=0;if(l)return n.neighbor=v,void(v.neighbor=n)}}}function c(r,n,t,e){var o=r.ridges.map((function(r){return n[r.verts[0]]})),a=r.plane=f(o);if(e&&i(e,a,t)>0){!function(r){for(var n=r.length,t=0;t<n;++t)r[t]=-r[t]}(a),r.verts.reverse(),r.ridges.reverse();for(var u=0,v=r.ridges;u<v.length;u++){v[u].verts.reverse()}}}function g(r,n,t){for(var e=r.verts,o=r.ridges.length;o<t;++o){for(var a=new l(r),f=0;f<t-1;++f)a.verts[f]=e[(o+f)%t];a.opposite=e[(o+t)%t],h(0,a,n),r.ridges.push(a)}}function p(r,n,t,e,o,a){var f=new s;return f.verts=r.verts.concat([n]),f.ridges.push(r),r.facet=f,r.opposite=n,g(f,e,a),c(f,t,a,o),f}function d(r,n,t){var e=r[n?n[0]:0],o=e.length,a=n?n.length:o+1;if(t)for(var f=0;f<o;++f)t[f]=e[f];else t=e.slice();for(f=0;f<o;++f){for(var i=1;i<a;++i){var u=n?n[i]:i;t[f]+=r[u][f]}t[f]/=a}return t}function w(r,n){for(var t=r[0].length,e=t+1,o=[],a=0;a<=t;++a){for(var f=new s,i=0;i<t;++i){var u=(a+i)%e;f.verts[i]=n?n[u]:u}g(f,o,t);var v=(a+t)%(t+1);c(f,r,t,r[n?n[v]:v]),o.push(f)}return o}function m(r,n){console.assert(n<r.length,"Index out of bounds!");var t=r.pop();return r.length>0&&t!==r[n]&&(r[n]=t),n}function b(r,n){var t=r.pop();if(t===n)return r.length;var e=r.indexOf(n);if(-1===e)throw r.push(t),new Error("Removing component that's not present");return r[e]=t,e}var y=1e-4,A=function(){this.outsideSet=[],this.outsideDist=[]};function F(r){var n=r.meta,t=n.outsideSet,e=n.outsideDist,o=t.length;if(0===o)return-1;for(var a=t[0],f=e[0],i=1;i<o;++i)e[i]>f&&(f=e[i],a=t[i]);return a}function M(r,n,t,e){for(var o=t.map((function(r){return[]})),a=r.length,f=0;f<a;++f)for(var u=r[f],v=n[u],l=0,s=t;l<s.length;l++){var h=s[l],c=i(v,h.plane,e);if(c>y){var g=h.meta;g.outsideSet.push(u),g.outsideDist.push(c);break}}return o}function S(r,n,t,e,o){t.push(n),n.meta.currentPoint=r;for(var a=0,f=n.ridges;a<f.length;a++){var u=f[a],v=u.neighbor.facet;v.meta.currentPoint!==r&&(i(r,v.plane,o)>y?S(r,v,t,e,o):e.push(u))}}function P(r,n,t,e,o){for(var a=[],f=0,i=t;f<i.length;f++){var u=p(i[f],n,r,a,e,o);u.meta=new A,a.push(u)}return a}function x(r,n,t,e){for(var o=t[r],a=t[n],f=0;f<e;++f){if(o[f]<a[f])return n;if(o[f]>a[f])return r}return n}function _(r,n,t,e){for(var o=t[r],a=t[n],f=0;f<e;++f){if(o[f]>a[f])return n;if(o[f]<a[f])return r}return n}function k(r){var t=r.length;if(0!==t){var e=n(r[0]);if(t<=e)throw new Error("A convex hull in "+e+" dimensions requires at least "+(e+1)+" points.");for(var o=[],a=0;a<t;++a)o.push(a);for(var u=function(r,n){for(var t=r.length,e=0,o=0,a=1;a<t;++a)o=x(a,o,r,n),e=_(a,e,r,n);var u=[e,o],v=[r[e],r[o]];for(a=2;a<n+1;++a){for(var l=f(v),s=-1/0,h=-1,c=0;c<t;++c){var g=Math.abs(i(r[c],l,a));g>s&&(s=g,h=c)}u.push(h),v.push(r[h])}return u}(r,e),v=d(r,u),l=w(r,u),s=0,h=l;s<h.length;s++){h[s].meta=new A}!function(r,n){for(var t=0,e=n.slice().sort((function(r,n){return n-r}));t<e.length;t++)m(r,e[t])}(o,u),function(r){for(var n,t,e=r.length;0!==e;)t=Math.floor(Math.random()*e),n=r[e-=1],r[e]=r[t],r[t]=n}(o),M(o,r,l,e);for(var c=!1;!c;){c=!0;for(a=0;a<l.length;++a){var g=l[a],p=F(g);if(-1!==p){b(g.meta.outsideSet,p);var y=[],k=[];S(r[p],g,y,k,e);for(var q=P(r,p,k,v,e),D=0,O=y;D<O.length;D++){var B=O[D];b(l,B)<=a&&--a,M(B.meta.outsideSet,r,q,e),B.meta.outsideSet.length>0&&(c=!1)}l.push.apply(l,q)}}}for(var E=0,R=l;E<R.length;E++){R[E].meta=null}return l}}var q=[],D=[];function O(r,n,t,e,o,a){d(t,n.verts,e);for(var f=0;f<a;++f)o[f]=r[f]-e[f];for(var i=null,v=1,l=0,s=n.ridges;l<s.length;l++){var h=s[l],c=u(e,o,h.getPlane(t,e),a,!0);c>-1e-4&&c<=v&&(v=c,i=h)}return i?i.neighbor?O(r,i.neighbor.facet,t,e,o,a):null:n}return r.Facet=s,r.Ridge=l,r.barycentricCoords=function(r,t,e,a){var f=n(r);a=a||new Float32Array(f+1);var i=q[f];i||(q[f]=i=o(f),D[f]=new Float32Array(f));for(var u=D[f],l=t.verts,s=e[l[f]],h=0;h<f;++h){u[h]=r[h]-s[h];for(var c=e[l[h]],g=0;g<f;++g)i[g][h]=c[g]-s[g]}for(v(i,f),function(r,n,t,e){for(var o=0;o<e;++o){t[o]=0;for(var a=0;a<e;++a)t[o]+=n[a]*r[o][a]}}(i,u,a,f),a[f]=1,h=0;h<f;++h)a[f]-=a[h];return a},r.createSimplex=w,r.delaunay=function(r){var t=n(r[0]);return r.length===t+1?k(r):k(function(r,n){for(var t=n+1,e=r.length,o=t<<2,a=new ArrayBuffer((e+1)*o),f=0,i=0,u=r.map((function(r){for(var e=new Float32Array(a,f,t),u=0,v=0;v<n;++v){var l=r[v];e[v]=l,u+=l*l}return e[n]=u,u>i&&(i=u),f+=o,e})),v=new Float32Array(a,e*o,t),l=0;l<n;++l)v[l]=0;return v[n]=10*i,u.push(v),u}(r,t)).filter((function(r){if(r.plane[t]>=0){for(var n=0,e=r.ridges;n<e.length;n++){var o=e[n];o.neighbor&&(o.neighbor.neighbor=null)}return!1}return!0}))},r.quickHull=k,r.visibilityWalk=function(r,t,e,o){var a;if(!0===o){if(!(a=function(r,n,t){for(var e=t.length,o=0;o<e;++o){for(var a=t[o],f=a.verts,i=f.length,u=n[0].length,v=!0,l=0;l<u;++l){for(var s=n[f[0]][l],h=s,c=1;c<i;++c){var g=n[f[c]][l];g<s?s=g:g>h&&(h=g)}var p=r[l];if(p<s||p>=h){v=!1;break}}if(v)return a}return null}(r,e,t)))return null}else a=o||t[0];var f=n(e[0]);return O(r,a,e,new Float32Array(f),new Float32Array(f),f)},Object.defineProperty(r,"__esModule",{value:!0}),r}({});
