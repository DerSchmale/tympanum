var TYMP=function(r){"use strict";function n(r){return r.length}function t(r,n,t){void 0===t&&(t=-1),-1===t&&(t=r.length);for(var e=r[0]*n[0],o=1;o<t;++o)e+=r[o]*n[o];return e}function e(r,n,t,e,o){for(var a=0,i=0,u=0;u<o;++u)if(u!==t){i=0;for(var f=0;f<o;++f)f!==e&&(n[a][i]=r[u][f],++i);++a}}function o(r){for(var n=[],t=0;t<r;++t)n[t]=new Float32Array(r);return n}function a(r,n){if(1===n)return r[0][0];if(2===n)return r[0][0]*r[1][1]-r[0][1]*r[1][0];if(3===n)return r[0][0]*r[1][1]*r[2][2]+r[0][1]*r[1][2]*r[2][0]+r[0][2]*r[1][0]*r[2][1]-r[0][2]*r[1][1]*r[2][0]-r[0][1]*r[1][0]*r[2][2]-r[0][0]*r[1][2]*r[2][1];for(var t=1,i=0,u=o(n-1),f=0;f<n;++f)e(r,u,0,f,n),i+=t*r[0][f]*a(u,n-1),t=-t;return i}function i(r,n){var i=r.length,u=r[0],f=[];n=n||new Float32Array(i+1);for(var v=1;v<i;++v){for(var s=r[v],l=[],h=0;h<i;++h)l[h]=u[h]-s[h];f.push(l)}return function(r,n){var t=r[0].length;if(n=n||new Float32Array(t),3===t){var i=r[0],u=r[1],f=i[0],v=i[1],s=i[2],l=u[0],h=u[1],c=u[2];n[0]=v*c-s*h,n[1]=s*l-f*c,n[2]=f*h-v*l}else for(var g=t%2?-1:1,p=o(t-1),d=0;d<t;++d)e(r,p,t-1,d,t),n[d]=g*a(p,t-1),g=-g}(f,n),n[i]=-t(u,n,i),function(r){for(var n=r.length,t=r[0]*r[0],e=1;e<n-1;++e)t+=r[e]*r[e];if(0===t)return r;for(t=1/Math.sqrt(t),e=0;e<n;++e)r[e]*=t}(n),n}function u(r,n,t){void 0===t&&(t=-1),-1===t&&(t=r.length);for(var e=n[t],o=0;o<t;++o)e+=r[o]*n[o];return e}function f(r,n,e,o,a){void 0===a&&(a=!1);var i=t(e,n,o);return Math.abs(i)>0&&(!a||i>0)?-u(r,e,o)/i:-1}var v=function(){function r(r){this.verts=[],this.facet=r}return r.prototype.getPlane=function(r){return this._plane||(this._plane=i(this.verts.map((function(n){return r[n]})))),this._plane},r}(),s=function(){this.ridges=[],this.verts=[]};function l(r,n,t){for(var e=n.verts,o=e.length,a=0,i=t;a<i.length;a++)for(var u=0,f=i[a].ridges;u<f.length;u++){var v=f[u];if(!v.neighbor){for(var s=!0,l=0;l<o;++l)s=s&&v.verts.indexOf(e[l])>=0;if(s)return n.neighbor=v,void(v.neighbor=n)}}}function h(r,n,t,e){var o=r.ridges.map((function(r){return n[r.verts[0]]})),a=r.plane=i(o);if(e&&u(e,a,t)>0){!function(r){for(var n=r.length,t=0;t<n;++t)r[t]=-r[t]}(a),r.verts.reverse(),r.ridges.reverse();for(var f=0,v=r.ridges;f<v.length;f++){v[f].verts.reverse()}}}function c(r,n,t){for(var e=r.verts,o=r.ridges.length;o<t;++o){for(var a=new v(r),i=0;i<t-1;++i)a.verts[i]=e[(o+i)%t];a.opposite=e[(o+t)%t],l(0,a,n),r.ridges.push(a)}}function g(r,n,t,e,o,a){var i=new s;return i.verts=r.verts.concat([n]),i.ridges.push(r),r.facet=i,r.opposite=n,c(i,e,a),h(i,t,a,o),i}function p(r,n,t){var e=r[n?n[0]:0],o=e.length,a=n?n.length:o+1;if(t)for(var i=0;i<o;++i)t[i]=e[i];else t=e.slice();for(i=0;i<o;++i){for(var u=1;u<a;++u){var f=n?n[u]:u;t[i]+=r[f][i]}t[i]/=a}return t}function d(r,n){for(var t=r[0].length,e=t+1,o=[],a=0;a<=t;++a){for(var i=new s,u=0;u<t;++u){var f=(a+u)%e;i.verts[u]=n?n[f]:f}c(i,o,t);var v=(a+t)%(t+1);h(i,r,t,r[n?n[v]:v]),o.push(i)}return o}function m(r,n){console.assert(n<r.length,"Index out of bounds!");var t=r.pop();return r.length>0&&t!==r[n]&&(r[n]=t),n}function w(r,n){var t=r.pop();if(t===n)return r.length;var e=r.indexOf(n);if(-1===e)throw r.push(t),new Error("Removing component that's not present");return r[e]=t,e}var b=1e-4,y=function(){this.outsideSet=[],this.outsideDist=[]};function A(r){var n=r.meta,t=n.outsideSet,e=n.outsideDist,o=t.length;if(0===o)return-1;for(var a=t[0],i=e[0],u=1;u<o;++u)e[u]>i&&(i=e[u],a=t[u]);return a}function F(r,n,t,e){for(var o=t.map((function(r){return[]})),a=r.length,i=0;i<a;++i)for(var f=r[i],v=n[f],s=0,l=t;s<l.length;s++){var h=l[s],c=u(v,h.plane,e);if(c>b){var g=h.meta;g.outsideSet.push(f),g.outsideDist.push(c);break}}return o}function M(r,n,t,e,o){t.push(n),n.meta.currentPoint=r;for(var a=0,i=n.ridges;a<i.length;a++){var f=i[a],v=f.neighbor.facet;v.meta.currentPoint!==r&&(u(r,v.plane,o)>b?M(r,v,t,e,o):e.push(f))}}function S(r,n,t,e,o){for(var a=[],i=0,u=t;i<u.length;i++){var f=g(u[i],n,r,a,e,o);f.meta=new y,a.push(f)}return a}function P(r,n,t,e){for(var o=t[r],a=t[n],i=0;i<e;++i){if(o[i]<a[i])return n;if(o[i]>a[i])return r}return n}function x(r,n,t,e){for(var o=t[r],a=t[n],i=0;i<e;++i){if(o[i]>a[i])return n;if(o[i]<a[i])return r}return n}function _(r){var t=r.length;if(0!==t){var e=n(r[0]);if(t<=e)throw new Error("A convex hull in "+e+" dimensions requires at least "+(e+1)+" points.");for(var o=[],a=0;a<t;++a)o.push(a);for(var f=function(r,n){for(var t=r.length,e=0,o=0,a=1;a<t;++a)o=P(a,o,r,n),e=x(a,e,r,n);var f=[e,o],v=[r[e],r[o]];for(a=2;a<n+1;++a){for(var s=i(v),l=-1/0,h=-1,c=0;c<t;++c){var g=Math.abs(u(r[c],s,a));g>l&&(l=g,h=c)}f.push(h),v.push(r[h])}return f}(r,e),v=p(r,f),s=d(r,f),l=0,h=s;l<h.length;l++){h[l].meta=new y}!function(r,n){for(var t=0,e=n.slice().sort((function(r,n){return n-r}));t<e.length;t++)m(r,e[t])}(o,f),function(r){for(var n,t,e=r.length;0!==e;)t=Math.floor(Math.random()*e),n=r[e-=1],r[e]=r[t],r[t]=n}(o),F(o,r,s,e);for(var c=!1;!c;){c=!0;for(a=0;a<s.length;++a){var g=s[a],b=A(g);if(-1!==b){w(g.meta.outsideSet,b);var _=[],k=[];M(r[b],g,_,k,e);for(var q=S(r,b,k,v,e),D=0,O=_;D<O.length;D++){var E=O[D];w(s,E)<=a&&--a,F(E.meta.outsideSet,r,q,e),E.meta.outsideSet.length>0&&(c=!1)}s.push.apply(s,q)}}}for(var R=0,j=s;R<j.length;R++){j[R].meta=null}return s}}function k(r,n,t,e,o,a){p(t,n.verts,e);for(var i=0;i<a;++i)o[i]=r[i]-e[i];for(var u=null,v=1,s=0,l=n.ridges;s<l.length;s++){var h=l[s],c=f(e,o,h.getPlane(t),a,!0);c>-1e-4&&c<=v&&(v=c,u=h)}return u?u.neighbor?k(r,u.neighbor.facet,t,e,o,a):null:n}return r.Facet=s,r.Ridge=v,r.createSimplex=d,r.delaunay=function(r){var t=n(r[0]);return r.length===t+1?_(r):_(function(r,n){for(var t=n+1,e=r.length,o=t<<2,a=new ArrayBuffer((e+1)*o),i=0,u=0,f=r.map((function(r){for(var e=new Float32Array(a,i,t),f=0,v=0;v<n;++v){var s=r[v];e[v]=s,f+=s*s}return e[n]=f,f>u&&(u=f),i+=o,e})),v=new Float32Array(a,e*o,t),s=0;s<n;++s)v[s]=0;return v[n]=10*u,f.push(v),f}(r,t)).filter((function(r){if(r.plane[t]>=0){for(var n=0,e=r.ridges;n<e.length;n++){var o=e[n];o.neighbor&&(o.neighbor.neighbor=null)}return!1}return!0}))},r.quickHull=_,r.visibilityWalk=function(r,t,e,o){var a;if(!0===o){if(!(a=function(r,n,t){for(var e=t.length,o=0;o<e;++o){for(var a=t[o],i=a.verts,u=i.length,f=n[0].length,v=!0,s=0;s<f;++s){for(var l=n[i[0]][s],h=l,c=1;c<u;++c){var g=n[i[c]][s];g<l?l=g:g>h&&(h=g)}var p=r[s];if(p<l||p>=h){v=!1;break}}if(v)return a}return null}(r,e,t)))return null}else a=o||t[0];var i=n(e[0]);return k(r,a,e,new Float32Array(i),new Float32Array(i),i)},Object.defineProperty(r,"__esModule",{value:!0}),r}({});
