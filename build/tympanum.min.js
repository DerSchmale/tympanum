var TYMP=function(r){"use strict";var n=function(r){this.verts=[],this.facet=r},t=function(){this.ridges=[],this.verts=[]};function e(r){return r.length}function o(r,n,t,e,o){for(var a=0,u=0,f=0;f<o;++f)if(f!==t){u=0;for(var i=0;i<o;++i)i!==e&&(n[a][u]=r[f][i],++u);++a}}function a(r){for(var n=[],t=0;t<r;++t)n[t]=new Float32Array(r);return n}function u(r,n){if(1===n)return r[0][0];if(2===n)return r[0][0]*r[1][1]-r[0][1]*r[1][0];if(3===n)return r[0][0]*r[1][1]*r[2][2]+r[0][1]*r[1][2]*r[2][0]+r[0][2]*r[1][0]*r[2][1]-r[0][2]*r[1][1]*r[2][0]-r[0][1]*r[1][0]*r[2][2]-r[0][0]*r[1][2]*r[2][1];for(var t=1,e=0,f=a(n-1),i=0;i<n;++i)o(r,f,0,i,n),e+=t*r[0][i]*u(f,n-1),t=-t;return e}function f(r,n){var t=r.length,e=r[0],f=[];n=n||new Float32Array(t+1);for(var i=1;i<t;++i){for(var v=r[i],s=[],h=0;h<t;++h)s[h]=v[h]-e[h];f.push(s)}return function(r,n){var t=r[0].length;if(n=n||new Float32Array(t),3===t){var e=r[0],f=r[1],i=e[0],v=e[1],s=e[2],h=f[0],l=f[1],c=f[2];n[0]=v*c-s*l,n[1]=s*h-i*c,n[2]=i*l-v*h}else for(var g=t%2?-1:1,p=a(t-1),d=0;d<t;++d)o(r,p,t-1,d,t),n[d]=g*u(p,t-1),g=-g}(f,n),n[t]=-function(r,n,t){void 0===t&&(t=-1),-1===t&&(t=r.length);for(var e=r[0]*n[0],o=1;o<t;++o)e+=r[o]*n[o];return e}(e,n,t),function(r){for(var n=r.length,t=r[0]*r[0],e=1;e<n-1;++e)t+=r[e]*r[e];if(0===t)return r;for(t=1/Math.sqrt(t),e=0;e<n;++e)r[e]*=t}(n),n}function i(r,n,t){for(var e=n[t],o=0;o<t;++o)e+=r[o]*n[o];return e}function v(r,n,t){for(var e=n.verts,o=e.length,a=0,u=t;a<u.length;a++)for(var f=0,i=u[a].ridges;f<i.length;f++){var v=i[f];if(!v.neighbor){for(var s=!0,h=0;h<o;++h)s=s&&v.verts.indexOf(e[h])>=0;if(s)return n.neighbor=v,void(v.neighbor=n)}}}function s(r,n,t,e){var o=r.ridges.map((function(r){return n[r.verts[0]]})),a=r.plane=f(o);if(e&&i(e,a,t)>0){!function(r){for(var n=r.length,t=0;t<n;++t)r[t]=-r[t]}(a),r.ridges.reverse();for(var u=0,v=r.ridges;u<v.length;u++){v[u].verts.reverse()}}}function h(r,t,e){for(var o=r.ridges.length;o<e;++o){for(var a=new n(r),u=0;u<e-1;++u)a.verts[u]=r.verts[(o+u)%e];v(0,a,t),r.ridges.push(a)}}function l(r,n,e){for(var o=[],a=n+1,u=0;u<=n;++u){for(var f=new t,i=0;i<n;++i){var v=(u+i)%a;f.verts[i]=e?e[v]:v}h(f,o,n);var l=(u+n)%(n+1);s(f,r,n,r[e?e[l]:l]),o.push(f)}return o}function c(r,n){console.assert(n<r.length,"Index out of bounds!");var t=r.pop();return r.length>0&&t!==r[n]&&(r[n]=t),n}function g(r,n){var t=r.pop();if(t===n)return r.length;var e=r.indexOf(n);if(-1===e)throw r.push(t),new Error("Removing component that's not present");return r[e]=t,e}var p=1e-4,d=function(){this.outsideSet=[],this.outsideDist=[]};function m(r){var n=r.meta,t=n.outsideSet,e=n.outsideDist,o=t.length;if(0===o)return-1;for(var a=t[0],u=e[0],f=1;f<o;++f)e[f]>u&&(u=e[f],a=t[f]);return a}function w(r,n,t,e){for(var o=t.map((function(r){return[]})),a=r.length,u=0;u<a;++u)for(var f=r[u],v=n[f],s=0,h=t;s<h.length;s++){var l=h[s],c=i(v,l.plane,e);if(c>p){var g=l.meta;g.outsideSet.push(f),g.outsideDist.push(c);break}}return o}function b(r,n,t,e,o){t.push(n),n.meta.currentPoint=r;for(var a=0,u=n.ridges;a<u.length;a++){var f=u[a],v=f.neighbor.facet;v.meta.currentPoint!==r&&(i(r,v.plane,o)>p?b(r,v,t,e,o):e.push(f))}}function y(r,n,e,o,a,u){var f=new t;return f.meta=new d,f.verts=r.verts.concat([n]),f.ridges.push(r),r.facet=f,h(f,o,u),s(f,e,u,a),f}function A(r,n,t,e,o){for(var a=[],u=0,f=t;u<f.length;u++){var i=y(f[u],n,r,a,e,o);a.push(i)}return a}function S(r,n,t,e){for(var o=t[r],a=t[n],u=0;u<e;++u){if(o[u]<a[u])return n;if(o[u]>a[u])return r}return n}function F(r,n,t,e){for(var o=t[r],a=t[n],u=0;u<e;++u){if(o[u]>a[u])return n;if(o[u]<a[u])return r}return n}function M(r){var n=r.length;if(0!==n){var t=e(r[0]);n<=t&&console.log("A convex hull in "+t+" dimensions requires at least "+(t+1)+" points.");for(var o=[],a=0;a<n;++a)o.push(a);for(var u=function(r,n){for(var t=r.length,e=0,o=0,a=1;a<t;++a)o=S(a,o,r,n),e=F(a,e,r,n);var u=[e,o],v=[r[e],r[o]];for(a=2;a<n+1;++a){for(var s=f(v),h=-1/0,l=-1,c=0;c<t;++c){var g=Math.abs(i(r[c],s,a));g>h&&(h=g,l=c)}u.push(l),v.push(r[l])}return u}(r,t),v=function(r,n,t){for(var e=r[0].slice(),o=0;o<n;++o){for(var a=1;a<=n;++a){var u=t[a];e[o]+=r[u][o]}e[o]/=n+1}return e}(r,t,u),s=l(r,t,u),h=0,p=s;h<p.length;h++){p[h].meta=new d}u.sort((function(r,n){return n-r}));for(a=0;a<t+1;++a)c(o,u[a]);!function(r){for(var n,t,e=r.length;0!==e;)t=Math.floor(Math.random()*e),n=r[e-=1],r[e]=r[t],r[t]=n}(o),w(o,r,s,t);for(var y=!1;!y;){y=!0;for(a=0;a<s.length;++a){var M=s[a],x=m(M);if(-1!==x){g(M.meta.outsideSet,x);var P=[],q=[];b(r[x],M,P,q,t);for(var D=A(r,x,q,v,t),O=0,k=P;O<k.length;O++){var R=k[O];g(s,R)<=a&&--a,w(R.meta.outsideSet,r,D,t),R.meta.outsideSet.length>0&&(y=!1)}s.push.apply(s,D)}}}for(var _=0,j=s;_<j.length;_++){j[_].meta=null}return s}}return r.Facet=t,r.Ridge=n,r.createSimplex=l,r.delaunay=function(r){var n=e(r[0]);return r.length===n+1?M(r):M(function(r,n){for(var t=n+1,e=r.length,o=t<<2,a=new ArrayBuffer((e+1)*o),u=0,f=0,i=r.map((function(r){for(var e=new Float32Array(a,u,t),i=0,v=0;v<n;++v){var s=r[v];e[v]=s,i+=s*s}return e[n]=i,i>f&&(f=i),u+=o,e})),v=new Float32Array(a,e*o,t),s=0;s<n;++s)v[s]=0;return v[n]=10*f,i.push(v),i}(r,n)).filter((function(r){if(r.plane[n]>=0){for(var t=0,e=r.ridges;t<e.length;t++){var o=e[t];o.neighbor&&(o.neighbor.neighbor=null)}return!1}return!0}))},r.quickHull=M,Object.defineProperty(r,"__esModule",{value:!0}),r}({});
